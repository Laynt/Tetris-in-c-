#include"shape.h"


const int Shape[7][4][4][4]={
     {{{0,0,0,0}, 
     {0,0,0,0},
     {0,0,1,0},
     {1,1,1,0}}, // L

     {{0,0,0,0},
     {1,1,0,0},
     {0,1,0,0},
     {0,1,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,1,0},
     {1,0,0,0}},
     
     {{0,0,0,0},
     {1,0,0,0},
     {1,0,0,0},
     {1,1,0,0}}},
     /////////////////////////////////
     {{{1,0,0,0}, 
     {1,0,0,0},
     {1,0,0,0},
     {1,0,0,0}}, // straight

     {{0,0,0,0},
     {0,0,0,0},
     {0,0,0,0},
     {1,1,1,1}},

     {{1,0,0,0},
     {1,0,0,0},
     {1,0,0,0},
     {1,0,0,0}},
     
     {{1,0,0,0},
     {1,0,0,0},
     {1,0,0,0},
     {1,0,0,0}}},
     /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {1,1,0,0},
     {1,1,0,0}}, // square

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,0,0},
     {1,1,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,0,0},
     {1,1,0,0}},
     
     {{0,0,0,0},
     {0,0,0,0},
     {1,1,0,0},
     {1,1,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {1,0,0,0},
     {1,1,1,0}},    // reverse L

     {{0,0,0,0},
     {0,1,0,0},
     {0,1,0,0},
     {1,1,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,1,0},
     {0,0,1,0}},
    
     {{0,0,0,0},
     {1,1,0,0},
     {1,0,0,0},
     {1,0,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {0,1,0,0},
     {1,1,1,0}},    // T

     {{0,0,0,0},
     {0,1,0,0},
     {1,1,0,0},
     {0,1,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,1,0},
     {0,1,0,0}},
     
     {{0,0,0,0},
     {1,0,0,0},
     {1,1,0,0},
     {1,0,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {0,1,1,0},
     {1,1,0,0}},    // Z

     {{0,0,0,0},
     {1,0,0,0},
     {1,1,0,0},
     {0,1,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {0,1,1,0},
     {1,1,0,0}},
     
     {{0,0,0,0},
     {0,0,0,0},
     {0,1,1,0},
     {1,1,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {1,1,0,0},
     {0,1,1,0}},    // Reverse Z

     {{0,0,0,0},
     {0,1,0,0},
     {1,1,0,0},
     {1,0,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,0,0},
     {0,1,1,0}},
     
     {{0,0,0,0},
     {0,0,0,0},
     {1,1,0,0},
     {0,1,1,0}}}};
     
void ShowShape(int play){

int i,j,l,s;
printf("\n");
printf(" 						Shape : \n");
printf(" 			 			 _________\n						|         |\n");


	for (i=0; i<4;i++){
		printf("						|");
		for (l=0; l<4;l++){
		if (Shape[play][0][i][l] == 1){
			printf(" #");
		}
		else{
			printf("  ");
			
		} 
		
		}printf(" |");
		
		do{
		printf("\n");
		s++;
		}while(s<4);
			
	}printf("						|");
	printf("_________");
	printf("|");
	printf("\n");
      }

void SetShape(int board[ROWS][COLS],int col,int type,int position){
 
    int align = 0;
    int k=0 ;
    int i, j, h;
    

    for(i = 4;i<ROWS;i++){
     for(h =4;h>0;h--){
      for(j = 0;j<4;j++){
       if((board[i][col+j]) == 1 && (Shape[type][position-1][h][j]) == 1 && (k == 0)){
         align = i-h+3;
         k =1;
        }
       }
      }
     }


    for(i = 0;i<4;i++){
     for(j=0;j<4;j++){
       if(board[(align-4)+i][col+j] == 0){
        board[(align-4)+i][col+j] = Shape[type][position-1][i][j];
       }    
      }
     }


}
